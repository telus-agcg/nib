version: "2"

services:
  gem: &default
    build: .
    volumes:
      # in dev/test the nib binstub points to this path
      - .:/usr/src/app
      # for running integration specs
      - /var/run/docker.sock:/var/run/docker.sock

  test:
    <<: *default
    command: rake rspec:unit

  lint:
    <<: *default
    command: rubocop .
